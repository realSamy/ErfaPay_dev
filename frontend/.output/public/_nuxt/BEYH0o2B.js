import{z as A,A as N,aC as U,a_ as D,I,d as O,e as z,k as d,l as v,x as o,j as s,v as c,D as a,h,F as x,m as k,G as F,g as r,M as S,_ as T,f as V,af as E,H as G}from"./B9jAKPWx.js";import{_ as L}from"./OXrPZgjz.js";import{_ as M}from"./Au9kAsDY.js";import{c as P,d as R}from"./B8pTcEJU.js";import{u as q}from"./BBRQc-sT.js";import"./4JXGHORX.js";import"./B7bqkIxC.js";import"./DGQ0vsRx.js";import"./Dicm8otO.js";const H={key:0,class:"space-y-12"},J={class:"flex flex-col xl:flex-row justify-between gap-12"},K={class:"column"},Q={class:"has-hr"},W={class:"tr-value"},X={class:"font-bold"},Y={class:"tr"},Z={class:"tr-value"},ss={class:"tr"},ts={class:"tr-value"},es={class:"column"},os={class:"tr has-hr"},as={class:"tr-value"},ls={class:"tr has-hr"},ns={class:"tr-value"},rs={class:"tr has-hr"},is={class:"tr-value"},ds={class:"tr has-hr"},cs={class:"tr-value"},us={class:"column"},ms={class:"tr has-hr"},_s={class:"tr-value"},ps={class:"tr has-hr"},vs={class:"tr-value"},hs={key:0,class:"tr has-hr"},fs={class:"text-info tr-value max-h-6 overflow-hidden truncate"},bs={class:"w-100 p-2"},gs={class:"max-w-10 wrap-normal"},ys={class:"tr has-hr"},ws={class:"tr-value"},xs={class:"space-y-2"},ks={class:"w-full bg-ui-highlight p-4 grid md:grid-cols-2 gap-4"},$s={class:"space-y-2"},Bs={class:"font-bold"},Cs={class:"text-muted"},js={class:"font-medium bg-elevated p-2 rounded-md"},As={key:0,class:"inline-flex gap-2 flex-wrap"},Ns=A({__name:"[order]",async setup(Us){let u,f;const{locale:m,t:l}=N(),_=U().params.order,$=D(),{order:e}=([u,f]=I(()=>P(_)),u=await u,f(),u);$.value={name:e.value.user.full_name,order:_};const b={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},g=O(()=>({pending:{label:l("common.states.orders.pending"),color:"neutral"},processing:{label:l("common.states.orders.processing"),color:"info"},done:{label:l("common.states.orders.done"),color:"success"},rejected:{label:l("common.states.orders.rejected"),color:"error"}})[e.value.status]),B=z([{label:l("common.states.orders.pending"),value:"pending"},{label:l("common.states.orders.processing"),value:"processing"},{label:l("common.states.orders.done"),value:"done"},{label:l("common.states.orders.rejected"),value:"rejected"}]),C=async()=>{const n=await q()({status:e.value.status,admin_notes:e.value.admin_notes},{status:{label:l("common.labels.order_status"),type:"select",options:B},admin_notes:{label:l("common.labels.admin_notes"),type:"textarea"}},{title:l("common.titles.orders_update")});if(n){const{updateOrder:t,updatedOrder:p}=R();await t(_,n),e.value=p.value,E().add({title:l("common.titles.orders_update"),description:l("orders.messages.order_updated"),color:"success"})}};return(n,t)=>{const p=F,y=L,w=T,j=M;return o(e)?(r(),d("div",H,[s("section",J,[s("div",K,[s("div",Q,[t[0]||(t[0]=s("h2",{class:"title"},"کاربر سفارش دهنده:",-1)),s("div",W,[s("span",X,a(o(e).user.full_name),1),c(p,{name:`cif:${o(e).user.country_code.toLowerCase()}`,class:"rounded-md",size:"20"},null,8,["name"])])]),s("div",null,[t[3]||(t[3]=s("h2",{class:"title"},"مشخصات کاربری:",-1)),s("div",Y,[t[1]||(t[1]=s("span",{class:"tr-title"},"ایمیل:",-1)),s("span",Z,a(o(e).user.email),1)]),s("div",ss,[t[2]||(t[2]=s("span",{class:"tr-title"},"وضعیت حساب:",-1)),s("span",ts,[c(y,{color:o(e).user.is_blocked?"error":"success",variant:"subtle"},{default:h(()=>[S(a(o(e).user.is_blocked?"مسدود شده":"فعال"),1)]),_:1},8,["color"])])])])]),s("div",es,[t[8]||(t[8]=s("h2",{class:"title"},"مشخصات کلی سفارش:",-1)),s("div",null,[s("div",os,[t[4]||(t[4]=s("span",{class:"tr-title"},"شماره سفارش:",-1)),s("span",as,a(n.$n(Number(o(e).id),{useGrouping:!1})),1)]),s("div",ls,[t[5]||(t[5]=s("span",{class:"tr-title"},"نوع درخواست:",-1)),s("span",ns,a(o(e).service[`title_${o(m)}`]),1)]),s("div",rs,[t[6]||(t[6]=s("span",{class:"tr-title"},"مبلغ سفارش:",-1)),s("span",is,a(n.$n(Number(o(e).user_amount_irt)))+" تومان ",1)]),s("div",ds,[t[7]||(t[7]=s("span",{class:"tr-title"},"تاریخ ثبت:",-1)),s("span",cs,a(n.$d(new Date(o(e).created_at),b)),1)])])]),s("div",us,[t[13]||(t[13]=s("h2",{class:"title"},"وضعیت سفارش:",-1)),s("div",null,[s("div",ms,[t[9]||(t[9]=s("span",{class:"tr-title"},"اپراتور:",-1)),s("span",_s,a(o(e).processed_by?.full_name||"—"),1)]),s("div",ps,[t[10]||(t[10]=s("span",{class:"tr-title"},"آخرین وضعیت:",-1)),s("div",vs,[c(y,{color:o(g).color,label:o(g).label,class:"capitalize"},null,8,["color","label"]),c(w,{class:"mr-2",icon:"material-symbols:edit-square-outline",size:"xs",variant:"link",onClick:C})])]),o(e).admin_notes?(r(),d("div",hs,[t[11]||(t[11]=s("span",{class:"tr-title"},"توضیحات پشتیبان:",-1)),c(j,{mode:"hover"},{content:h(()=>[s("div",bs,[s("span",gs,a(o(e).admin_notes),1)])]),default:h(()=>[s("span",fs,a(o(e).admin_notes),1)]),_:1})])):v("",!0),s("div",ys,[t[12]||(t[12]=s("span",{class:"tr-title"},"تاریخ بروزرسانی:",-1)),s("span",ws,a(o(e).updated_at?n.$d(new Date(o(e).updated_at),b):"—"),1)])])])]),s("section",xs,[t[14]||(t[14]=s("h2",{class:"title"},"توضیحات:",-1)),s("div",ks,[(r(!0),d(x,null,k(o(e).custom_data,i=>(r(),d("div",$s,[s("div",null,[s("h4",Bs,a(i[`label_${o(m)}`]),1),s("p",Cs,a(i[`description_${o(m)}`]),1)]),s("p",js,a(i.value),1)]))),256))]),o(e).attachments?(r(),d("div",As,[(r(!0),d(x,null,k(o(e).attachments,i=>(r(),V(w,{href:i.url,label:i.filename,external:"",icon:"material-symbols:attachment",target:"_blank",variant:"soft"},null,8,["href","label"]))),256))])):v("",!0)])])):v("",!0)}}}),Ls=G(Ns,[["__scopeId","data-v-b2098c56"]]);export{Ls as default};
