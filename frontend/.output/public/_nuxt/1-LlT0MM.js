import{z as T,d as C,e as h,f as E,g,h as s,v as o,aD as Z,x as e,i as J,G as ee,p as le,A as P,aE as D,w as I,o as oe,j as m,D as z,n as ae,_ as A,E as se,l as B,a8 as L,a9 as H,aF as K,a7 as Q,aG as te,k,F as G,m as ne}from"./B9jAKPWx.js";import{_ as W}from"./bcpmAApf.js";import{_ as X}from"./BfIjcLtu.js";import{_ as ie}from"./BRoQb4x9.js";import{_ as de}from"./DqHZlzeT.js";import{_ as re}from"./PdnPEoMV.js";import{_ as Y}from"./BrxAOUNe.js";const me=T({__name:"Icon",props:{modelValue:{},label:{},size:{}},emits:["update:modelValue"],setup(b,{emit:$}){const d=b,c=$,l=C({get:()=>d.modelValue||"",set:r=>c("update:modelValue",r)}),V=h(["material-symbols:finance-chip-outline","material-symbols:finance-mode-rounded","material-symbols:finance-rounded","material-symbols:encrypted-rounded","material-symbols:send-money-rounded","material-symbols:attach-money-rounded","material-symbols:payments-rounded","material-symbols:currency-exchange-rounded","material-symbols:receipt-rounded","material-symbols:currency-bitcoin-rounded","material-symbols:admin-panel-settings-rounded","material-symbols:support-agent-rounded","material-symbols:shopping-cart-rounded","material-symbols:savings-rounded","material-symbols:transfer-within-a-station-rounded","material-symbols:request-quote-rounded","material-symbols:description-rounded","material-symbols:euro-symbol-rounded","material-symbols:currency-pound-rounded","material-symbols:trending-up-rounded","material-symbols:local-atm-rounded","material-symbols:money-rounded","material-symbols:local-taxi-rounded","material-symbols:local-shipping-rounded","material-symbols:local-dining-rounded","material-symbols:local-bar-rounded","material-symbols:local-car-wash-rounded"]);function v(r){V.value.push(r),l.value=r}return(r,t)=>{const _=ee,w=Z,u=de;return g(),E(u,le({label:b.label,size:b.size},r.$attrs),{default:s(()=>[o(w,{modelValue:e(l),"onUpdate:modelValue":t[0]||(t[0]=a=>J(l)?l.value=a:null),icon:e(l),items:e(V),ui:{group:"flex flex-wrap",item:"w-auto"},class:"w-full","create-item":"",placeholder:"جستجو و انتخاب نماد...",onCreate:v},{item:s(({item:a})=>[o(_,{name:a,size:"40"},null,8,["name"])]),"create-item-label":s(({item:a})=>[o(_,{name:a,size:"40"},null,8,["name"])]),_:1},8,["modelValue","icon","items"])]),_:1},16,["label","size"])}}}),ue=Object.assign(me,{__name:"PickerIcon"}),ce={class:"font-bold"},pe={class:"flex justify-between items-center"},_e={class:"space-y-4"},fe={class:"flex justify-between"},be={class:"flex gap-2"},ye=T({__name:"RequiredField",props:{modelValue:{}},emits:["update:modelValue","delete"],setup(b,{emit:$}){const{t:d}=P(),c=b,l=$,V=C(()=>!c.modelValue.label_fa||!c.modelValue.label_en),{t:v}=P(),r=h(!1),t=h(JSON.parse(JSON.stringify(D(c.modelValue)))),_=h(""),w={text:"material-symbols:edit-outline",number:"material-symbols:numbers-rounded",textarea:"material-symbols:text-ad",file:"material-symbols:upload-file",select:"material-symbols:list-alt"},u=[{value:"text",label:v("common.field_types.text")},{value:"number",label:v("common.field_types.number")},{value:"textarea",label:v("common.field_types.textarea")},{value:"select",label:v("common.field_types.select")}],a=C(()=>c.modelValue.label_fa||c.modelValue.label_en||d("modals.required_fields.unnamed"));I(()=>c.modelValue,q=>{t.value=D(q),t.value.options&&(_.value=t.value.options.join(`
`))},{deep:!0}),I(r,()=>{t.value=JSON.parse(JSON.stringify(D(c.modelValue))),t.value.options?_.value=t.value.options.join(`
`):_.value=""}),I(_,q=>{t.value.options=q.split(`
`).filter(i=>i.trim())}),oe(()=>{!c.modelValue.label_fa&&!c.modelValue.label_en?(r.value=!0,t.value.options||(t.value.options=[])):c.modelValue.options&&(_.value=c.modelValue.options.join(`
`))});const N=()=>{l("update:modelValue",t.value),r.value=!1},f=()=>{if(V.value)return F();r.value=!1},F=()=>{l("delete"),r.value=!1};return(q,i)=>{const x=A,M=X,y=L,j=H,S=W,R=K,n=se,U=Y,O=te;return g(),E(O,{open:e(r),"onUpdate:open":i[7]||(i[7]=p=>J(r)?r.value=p:null),description:e(d)("modals.required_fields.title"),dismissible:!1,title:e(d)("modals.required_fields.title"),transition:""},{content:s(()=>[o(U,{ref:"form",onSubmit:Q(N,["prevent"])},{default:s(()=>[o(n,null,{header:s(()=>[m("div",pe,[m("h3",null,z(e(d)("modals.required_fields.title")),1),o(x,{class:"-mr-2",color:"neutral",icon:"i-heroicons-x-mark-20-solid",variant:"ghost",onClick:f})])]),footer:s(()=>[m("div",fe,[o(x,{label:e(d)("common.labels.delete"),color:"error",size:"lg",variant:"outline",onClick:F},null,8,["label"]),m("div",be,[o(x,{label:e(d)("common.labels.cancel"),color:"neutral",size:"lg",variant:"outline",onClick:f},null,8,["label"]),o(x,{label:e(d)("common.labels.save"),size:"lg",type:"submit"},null,8,["label"])])])]),default:s(()=>[m("div",_e,[o(y,{label:e(d)("modals.required_fields.type"),name:"type",required:"",size:"lg"},{default:s(()=>[o(M,{modelValue:e(t).type,"onUpdate:modelValue":i[0]||(i[0]=p=>e(t).type=p),items:u,class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),o(y,{label:e(d)("modals.required_fields.label_fa"),name:"label_fa",required:"",size:"lg"},{default:s(()=>[o(j,{modelValue:e(t).label_fa,"onUpdate:modelValue":i[1]||(i[1]=p=>e(t).label_fa=p),class:"w-full",required:""},null,8,["modelValue"])]),_:1},8,["label"]),o(y,{label:e(d)("modals.required_fields.label_en"),name:"label_en",required:"",size:"lg"},{default:s(()=>[o(j,{modelValue:e(t).label_en,"onUpdate:modelValue":i[2]||(i[2]=p=>e(t).label_en=p),class:"w-full",required:""},null,8,["modelValue"])]),_:1},8,["label"]),o(y,{label:e(d)("modals.required_fields.description_fa"),name:"description_fa",size:"lg"},{default:s(()=>[o(S,{modelValue:e(t).description_fa,"onUpdate:modelValue":i[3]||(i[3]=p=>e(t).description_fa=p),class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),o(y,{label:e(d)("modals.required_fields.description_en"),name:"description_en",size:"lg"},{default:s(()=>[o(S,{modelValue:e(t).description_en,"onUpdate:modelValue":i[4]||(i[4]=p=>e(t).description_en=p),class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),e(t).type==="select"?(g(),E(y,{key:0,label:e(d)("modals.required_fields.options"),name:"options",required:"",size:"lg"},{default:s(()=>[o(S,{modelValue:e(_),"onUpdate:modelValue":i[5]||(i[5]=p=>J(_)?_.value=p:null),placeholder:e(d)("modals.required_fields.options_placeholder"),class:"w-full",required:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):B("",!0),o(y,{name:"is_required",size:"lg"},{default:s(()=>[o(R,{modelValue:e(t).is_required,"onUpdate:modelValue":i[6]||(i[6]=p=>e(t).is_required=p),label:e(d)("modals.required_fields.is_required"),class:"cursor-pointer",variant:"card"},null,8,["modelValue","label"])]),_:1})])]),_:1})]),_:1},512)]),default:s(()=>[o(x,{icon:w[b.modelValue.type]||"material-symbols:indeterminate-question-box",class:"mb-2",color:"neutral",variant:"outline",size:"xl"},{default:s(()=>[m("span",ce,"["+z(e(d)(`common.field_types.${c.modelValue.type}`))+"]",1),m("span",{class:ae({"text-error":e(V)})},z(e(a)),3)]),_:1},8,["icon"])]),_:1},8,["open","description","title"])}}}),ge=Object.assign(ye,{__name:"ModalRequiredField"}),Ve={class:"page-section"},ve={class:"font-bold text-2xl mb-8"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"flex gap-4 items-start w-full"},Fe=["src"],Se={class:"space-y-4"},ke={class:"inline-flex gap-2 flex-wrap"},he={key:0},Ce={class:"flex justify-start pt-6"},Ne=T({__name:"Service",props:{payload:{},existingService:{},pending:{type:Boolean},isEdit:{type:Boolean}},emits:["submit"],setup(b,{emit:$}){const d=b,c=$,l=h(JSON.parse(JSON.stringify(D(d.payload)))),V=C(()=>d.existingService?.banner||null),v=[{label:"درصدی",value:"percent"},{label:"مقداری ثابت",value:"fixed"}],r=C({get(){return l.value.commission_type==="percent"?Number(l.value.commission_percent):Number(l.value.commission_fixed)},set(u){l.value.commission_type==="percent"?l.value.commission_percent=u.toFixed(2):l.value.commission_fixed=u}});I(()=>l.value.commission_type,u=>{u==="percent"&&(l.value.user_pricing=!0)});const t=()=>{l.value.required_fields??=[],l.value.required_fields.push({type:"text",label_fa:"",label_en:"",description_fa:"",description_en:"",is_required:!0,options:[]})},_=u=>{l.value.required_fields?.splice(u,1)},w=()=>{c("submit",l.value)};return(u,a)=>{const N=H,f=L,F=W,q=X,i=ie,x=ue,M=re,y=A,j=K,S=ge,R=Y;return g(),k("section",Ve,[m("h2",ve,z(b.isEdit?"ویرایش سرویس":"ایجاد سرویس جدید"),1),o(R,{state:e(l),class:"max-w-4xl space-y-8",onSubmit:Q(w,["prevent"])},{default:s(()=>[o(f,{label:"عنوان سرویس",required:""},{default:s(()=>[m("div",xe,[o(N,{modelValue:e(l).title_fa,"onUpdate:modelValue":a[0]||(a[0]=n=>e(l).title_fa=n),dir:"rtl",icon:"i-heroicons-language",placeholder:"عنوان به فارسی (مثلاً: پرداخت قبض)",required:"",size:"xl"},null,8,["modelValue"]),o(N,{modelValue:e(l).title_en,"onUpdate:modelValue":a[1]||(a[1]=n=>e(l).title_en=n),dir:"ltr",placeholder:"Title in English (optional)",size:"xl"},null,8,["modelValue"])])]),_:1}),o(f,{label:"توضیحات سرویس",required:""},{default:s(()=>[m("div",qe,[o(F,{modelValue:e(l).description_fa,"onUpdate:modelValue":a[2]||(a[2]=n=>e(l).description_fa=n),rows:5,dir:"rtl",placeholder:"توضیحات کامل به فارسی...",required:""},null,8,["modelValue"]),o(F,{modelValue:e(l).description_en,"onUpdate:modelValue":a[3]||(a[3]=n=>e(l).description_en=n),rows:5,dir:"ltr",placeholder:"Description in English (optional)"},null,8,["modelValue"])])]),_:1}),m("div",Ue,[o(f,{label:"نوع کارمزد",required:""},{default:s(()=>[o(q,{modelValue:e(l).commission_type,"onUpdate:modelValue":a[4]||(a[4]=n=>e(l).commission_type=n),items:v,size:"lg"},null,8,["modelValue"])]),_:1}),o(f,{label:e(l).commission_type==="percent"?"درصد کارمزد (%)":"کارمزد ثابت (تومان)",required:""},{default:s(()=>[o(i,{modelValue:e(r),"onUpdate:modelValue":a[5]||(a[5]=n=>J(r)?r.value=n:null),"format-options":e(l).commission_type==="percent"?{style:"percent",minimumFractionDigits:2}:void 0,max:e(l).commission_type==="percent"?1:void 0,min:0,step:e(l).commission_type==="percent"?1e-4:1e3,required:"",size:"xl"},null,8,["modelValue","format-options","max","step"])]),_:1},8,["label"]),o(f,{label:"مالیات (%)",required:""},{default:s(()=>[o(i,{modelValue:e(l).tax_rate,"onUpdate:modelValue":a[6]||(a[6]=n=>e(l).tax_rate=n),"format-options":{style:"percent",minimumFractionDigits:2},max:1,min:0,step:.01,size:"xl"},null,8,["modelValue"])]),_:1})]),m("div",ze,[o(f,{label:"حداقل مبلغ (تومان)",required:""},{default:s(()=>[o(i,{modelValue:e(l).min_amount,"onUpdate:modelValue":a[7]||(a[7]=n=>e(l).min_amount=n),min:1e3,step:1e4,size:"xl"},null,8,["modelValue"])]),_:1}),o(f,{label:"حداکثر مبلغ (تومان)",required:""},{default:s(()=>[o(i,{modelValue:e(l).max_amount,"onUpdate:modelValue":a[8]||(a[8]=n=>e(l).max_amount=n),min:1e5,step:1e4,size:"xl"},null,8,["modelValue"])]),_:1})]),m("div",$e,[o(f,{label:"نماد سرویس",required:""},{default:s(()=>[o(x,{modelValue:e(l).icon,"onUpdate:modelValue":a[9]||(a[9]=n=>e(l).icon=n),"max-size":5*1024*1024,accept:"image/*",description:"حداکثر ۵ مگابایت",size:"xl"},null,8,["modelValue"])]),_:1}),o(f,{label:"تصویر بنر",required:""},{default:s(()=>[m("div",we,[o(M,{modelValue:e(l).banner,"onUpdate:modelValue":a[10]||(a[10]=n=>e(l).banner=n),"max-size":10*1024*1024,accept:"image/*",class:"flex-1",description:"حداکثر ۱۰ مگابایت",size:"xl"},null,8,["modelValue"]),!e(l).banner&&e(V)?(g(),k("img",{key:0,src:e(V),alt:"Current banner",class:"w-32 h-32 object-cover rounded-lg border"},null,8,Fe)):B("",!0)])]),_:1})]),m("div",Se,[o(f,{label:u.$t("common.titles.required_fields")},{default:s(()=>[o(y,{label:u.$t("common.labels.add"),size:"xl","trailing-icon":"material-symbols:add",onClick:t},null,8,["label"])]),_:1},8,["label"]),m("div",ke,[o(j,{modelValue:e(l).user_pricing,"onUpdate:modelValue":a[11]||(a[11]=n=>e(l).user_pricing=n),description:u.$t("services.messages.user_pricing"),disabled:e(l).commission_type==="percent",label:u.$t("common.labels.user_pricing"),size:"lg",variant:"card"},{description:s(({description:n})=>[m("div",null,[m("p",null,z(n),1),e(l).commission_type==="percent"?(g(),k("p",he,z(u.$t("services.messages.user_pricing_forced")),1)):B("",!0)])]),_:1},8,["modelValue","description","disabled","label"]),(g(!0),k(G,null,ne(e(l).required_fields,(n,U)=>(g(),k(G,null,[e(l).required_fields?.[U]?(g(),E(S,{key:0,modelValue:e(l).required_fields[U],"onUpdate:modelValue":O=>e(l).required_fields[U]=O,onDelete:O=>_(U)},null,8,["modelValue","onUpdate:modelValue","onDelete"])):B("",!0)],64))),256))])]),m("div",Ce,[o(y,{disabled:b.pending,label:b.isEdit?u.$t("pages.admin.labels.services.button_save"):"ایجاد سرویس جدید",loading:b.pending,color:"primary",size:"xl","trailing-icon":"material-symbols:save",type:"submit"},null,8,["disabled","label","loading"])])]),_:1},8,["state"])])}}}),Me=Object.assign(Ne,{__name:"FormAdminService"});export{Me as _};
