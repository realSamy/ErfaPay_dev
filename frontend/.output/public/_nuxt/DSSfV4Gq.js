import{z as h,A,K as B,e as b,aA as f,_ as p,k as C,g as v,j as n,v as i,x as s,i as $,aB as K,af as L,D as y,h as g}from"./B9jAKPWx.js";import{_ as D}from"./CboeWgWE.js";import{a as d,c as I,d as N,e as U}from"./mx1Kztk-.js";import{u as k}from"./BBRQc-sT.js";import{_ as j}from"./D11N8NiO.js";import{_ as O}from"./CpdwyHhR.js";import"./OXrPZgjz.js";import"./f4Ke4YGl.js";import"./DcDGsNhf.js";import"./BfNhCRJB.js";import"./4JXGHORX.js";import"./B7bqkIxC.js";import"./DGQ0vsRx.js";import"./Dicm8otO.js";import"./C5Zklyxe.js";import"./D9Vt5tXq.js";const S={class:"w-full flex justify-end"},z=h({__name:"TicketCategories",setup(x){const{t}=A(),c=B("data.tickets.categories"),r=b(!0),m=p;d().finally(()=>r.value=!1);const _=async e=>{if(!c.value.find(a=>a.id===e))return;if(await K({title:t("modals.confirms.delete_ticket_category.title"),message:t("modals.confirms.delete_ticket_category.description"),confirmLabel:t("common.labels.delete"),confirmColor:"error",confirmIcon:"material-symbols:delete-outline"})){const{data:a}=await I(e);a.value?.ok&&await d(!0)}},T=async e=>{const o=c.value.find(a=>a.id===e);if(!o)return;const l=await k()({title_en:o.title_en,title_fa:o.title_fa},{title_fa:{label:t("common.labels.title_fa")},title_en:{label:t("common.labels.title_en")}},{title:"modals.prompts.edit_ticket_category.title",confirmLabel:"common.labels.edit",confirmIcon:"material-symbols:edit-outline"});if(l){const{data:a}=await N(e,l);a.value?.ok&&await d(!0)}},w=async()=>{const e={title_en:"",title_fa:""},o=await k()(e,{title_fa:{label:t("common.labels.title_fa")},title_en:{label:t("common.labels.title_en")}},{title:"modals.prompts.add_ticket_category.title",confirmLabel:"common.labels.create",confirmIcon:"material-symbols:add"});if(o){const{data:l}=await U(o);l.value?.ok?await d(!0):L().add({title:t("error.title"),description:JSON.stringify(l.value?.errors)})}},u=b([{accessorKey:"id",header:"#",cell:({row:e})=>e.original.id},{accessorKey:"title_fa",header:t("common.labels.title_fa"),cell:({row:e})=>e.original.title_fa},{accessorKey:"title_en",header:t("common.labels.title_en"),cell:({row:e})=>e.original.title_en},{accessorKey:"actions",header:t("common.tables.operations"),cell:({row:e})=>{const o="space-x-2",l=f(p,{variant:"ghost",color:"neutral",onClick:()=>T(e.original.id),class:"p-1",icon:"material-symbols:edit-square-outline"}),a=f(p,{variant:"ghost",color:"error",onClick:()=>_(e.original.id),class:"p-1",icon:"material-symbols:delete-outline"});return f("div",{class:o},[l,a])}}]);return(e,o)=>{const l=D;return v(),C("div",null,[n("div",S,[i(s(m),{label:s(t)("common.labels.add"),size:"xl","trailing-icon":"material-symbols:add",onClick:w},null,8,["label"])]),i(l,{columns:s(u),"onUpdate:columns":o[0]||(o[0]=a=>$(u)?u.value=a:null),data:s(c),loading:s(r)},null,8,["columns","data","loading"])])}}}),E=Object.assign(z,{__name:"TableAdminTicketCategories"}),V={class:"space-y-10"},q={class:"font-bold text-2xl"},J={class:"font-bold text-2xl"},ie=h({__name:"index",setup(x){return(t,c)=>{const r=E,m=j,_=O;return v(),C("div",V,[n("section",null,[n("h2",q,y(t.$t("common.titles.ticket_categories")),1),i(m,null,{default:g(()=>[i(r)]),_:1})]),n("section",null,[n("h2",J,y(t.$t("common.titles.tickets")),1),i(m,null,{default:g(()=>[i(_)]),_:1})])])}}});export{ie as default};
