import{e as c,ad as i,ae as p,af as b,z as x,I as $,k as m,g as _,j as e,l as C,D as n,x as y,H as W,v as g,F as j,m as k,C as S,f as A}from"./B9jAKPWx.js";import{_ as B}from"./CmJI3OPD.js";import{C as N}from"./Bn5Fow7t.js";import"./OXrPZgjz.js";import"./BfIjcLtu.js";import"./DGQ0vsRx.js";import"./jFYhBC76.js";import"./BRoQb4x9.js";import"./B7bqkIxC.js";import"./BrxAOUNe.js";import"./CFuM1rFM.js";const T=()=>{const u=c(null),l=c([]),o=c([]),s=c(!1),t=c(null),r=async()=>{s.value=!0,t.value=null;try{const{data:a}=await p("/api/payments/wallet/");u.value=a.value}catch(a){t.value=a.message}finally{s.value=!1}},d=async()=>{s.value=!0;try{const{data:a}=await p("/api/payments/wallet/transactions/");l.value=a.value}catch(a){t.value=a.message}finally{s.value=!1}},v=async()=>{s.value=!0;try{const{data:a}=await p("/api/payments/charges/");o.value=a.value?.data||[]}catch(a){t.value=a.message}finally{s.value=!1}},f=async a=>{const{data:h,error:w}=await p("/api/payments/charges/create/",{method:"POST",body:a});return w.value?(b().add({title:"خطا در ایجاد شارژ",description:w.value?.data?.error||"خطای ناشناخته",color:"error"}),null):h.value?.approve_url?{approve_url:h.value.approve_url}:h.value};return{wallet:i(u),transactions:i(l),charges:i(o),loading:i(s),error:i(t),fetchWallet:r,fetchTransactions:d,fetchCharges:v,createCharge:f}},V={class:"wallet-card"},D={class:"font-bold text-xl"},F={key:0},I={class:"text-3xl font-bold"},L=x({__name:"Wallet",async setup(u){let l,o;const{wallet:s,fetchWallet:t}=T();return[l,o]=$(()=>t()),await l,o(),(r,d)=>(_(),m("div",V,[e("h3",D,n(r.$t("wallet.balance"))+":",1),y(s)?(_(),m("div",F,[e("p",I,[e("span",null,n(r.$n(Number(y(s).balance)))+" "+n(r.$t("common.currencies.text.toman")),1)])])):C("",!0)]))}}),O=Object.assign(W(L,[["__scopeId","data-v-aa4fbe42"]]),{__name:"CardWallet"}),z={class:"space-y-10"},E={class:"font-bold text-3xl"},H={class:"space-y-8"},P={class:"font-bold text-2xl"},q={class:"w-full flex justify-center"},G={class:"space-y-8"},J={class:"font-bold text-2xl"},K={class:"w-full flex justify-center"},M={class:"space-y-8"},Q={class:"font-bold text-2xl"},R={class:"flex flex-wrap justify-center gap-12"},re=x({__name:"index",async setup(u){let l,o;const{services:s}=([l,o]=$(()=>S()),l=await l,o(),l);return(t,r)=>{const d=O,v=B;return _(),m("div",z,[e("section",null,[e("h1",E,n(t.$t("wallet.overview")),1),e("p",null,n(t.$t("wallet.overview_desc")),1)]),e("section",H,[e("h2",P,n(t.$t("wallet.wallet_overview"))+":",1),e("div",q,[g(d)])]),e("section",G,[e("h2",J,n(t.$t("wallet.wallet_add_charge"))+":",1),e("div",K,[g(N)])]),e("section",M,[e("h2",Q,n(t.$t("wallet.popular_services"))+":",1),e("div",R,[(_(!0),m(j,null,k(y(s),f=>(_(),A(v,{item:f},null,8,["item"]))),256))])])])}}});export{re as default};
