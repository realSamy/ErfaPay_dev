import{as as R,b as H,d as T,t as k,f as q,g as s,h as S,j as A,n as d,k as h,l as w,q as y,G as me,au as ve,p as P,F as M,M as X,D as _,m as j,v as K,_ as Y,x as f,bw as L,P as Q,Y as G,bl as ee,e as $,bx as ge,w as ye,o as be,by as te,Z as D,bz as W,an as he,am as qe,bA as Se,u as ne,c as ie,aW as xe,b2 as ue,b3 as ce,bB as de,br as ae,aL as we,r as ke,az as Ce,aq as le,a7 as se,bC as re}from"./B9jAKPWx.js";import{_ as Be}from"./63q82eq7.js";import{_ as $e}from"./bcpmAApf.js";const Pe={slots:{root:"group/message relative w-full",container:"relative flex items-start",leading:"inline-flex items-center justify-center min-h-6",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",content:"relative text-pretty min-w-0 *:first:mt-0 *:last:mb-0",actions:["opacity-0 group-hover/message:opacity-100 absolute bottom-0 flex items-center","transition-opacity"]},variants:{variant:{solid:{content:"bg-inverted text-inverted"},outline:{content:"bg-default ring ring-default"},soft:{content:"bg-elevated/50"},subtle:{content:"bg-elevated/50 ring ring-default"},naked:{content:""}},side:{left:{container:"rtl:justify-end"},right:{container:"ltr:justify-end ms-auto max-w-[75%]"}},leading:{true:""},actions:{true:""},compact:{true:{root:"scroll-mt-3",container:"gap-1.5 pb-3",leadingIcon:"size-5",leadingAvatarSize:"2xs"},false:{root:"scroll-mt-4 sm:scroll-mt-6",container:"gap-3 pb-8",leadingIcon:"size-8",leadingAvatarSize:"md"}}},compoundVariants:[{compact:!0,actions:!0,class:{container:"pb-8"}},{leading:!0,compact:!1,side:"left",class:{actions:"left-11"}},{leading:!0,compact:!0,side:"left",class:{actions:"left-6.5"}},{variant:["solid","outline","soft","subtle"],compact:!1,class:{content:"px-4 py-3 rounded-lg min-h-12",leading:"mt-2"}},{variant:["solid","outline","soft","subtle"],compact:!0,class:{content:"px-2 py-1 rounded-lg min-h-8",leading:"mt-1"}},{variant:"naked",side:"left",class:{content:"w-full"}}],defaultVariants:{variant:"naked"}},oe={__name:"UChatMessage",props:{as:{type:null,required:!1,default:"article"},icon:{type:null,required:!1},avatar:{type:Object,required:!1},variant:{type:null,required:!1},side:{type:null,required:!1},actions:{type:Array,required:!1},compact:{type:Boolean,required:!1},content:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},id:{type:String,required:!0},role:{type:String,required:!0},metadata:{type:null,required:!1},parts:{type:Array,required:!0}},setup(e){const t=e,a=R(),c=H(),o=T(()=>k({extend:k(Pe),...c.ui?.chatMessage||{}})({variant:t.variant,side:t.side,leading:!!t.icon||!!t.avatar||!!a.leading,actions:!!t.actions||!!a.actions,compact:t.compact}));return(p,m)=>(s(),q(f(Q),{as:e.as,"data-role":e.role,"data-slot":"root",class:d(o.value.root({class:[t.ui?.root,t.class]}))},{default:S(()=>[A("div",{"data-slot":"container",class:d(o.value.container({class:t.ui?.container}))},[e.icon||e.avatar||a.leading?(s(),h("div",{key:0,"data-slot":"leading",class:d(o.value.leading({class:t.ui?.leading}))},[y(p.$slots,"leading",{avatar:e.avatar,ui:o.value},()=>[e.icon?(s(),q(me,{key:0,name:e.icon,"data-slot":"leadingIcon",class:d(o.value.leadingIcon({class:t.ui?.leadingIcon}))},null,8,["name","class"])):e.avatar?(s(),q(ve,P({key:1,size:t.ui?.leadingAvatarSize||o.value.leadingAvatarSize()},e.avatar,{"data-slot":"leadingAvatar",class:o.value.leadingAvatar({class:t.ui?.leadingAvatar})}),null,16,["size","class"])):w("",!0)])],2)):w("",!0),e.content||e.parts.length||a.content?(s(),h("div",{key:1,"data-slot":"content",class:d(o.value.content({class:t.ui?.content}))},[y(p.$slots,"content",{id:e.id,role:e.role,content:e.content,parts:e.parts},()=>[e.content?(s(),h(M,{key:0},[X(_(e.content),1)],64)):(s(!0),h(M,{key:1},j(e.parts,(u,b)=>(s(),h(M,{key:`${e.id}-${u.type}-${b}`},[u.type==="text"?(s(),h(M,{key:0},[X(_(u.text),1)],64)):w("",!0)],64))),128))])],2)):w("",!0),e.actions||a.actions?(s(),h("div",{key:2,"data-slot":"actions",class:d(o.value.actions({class:t.ui?.actions}))},[y(p.$slots,"actions",{actions:e.actions},()=>[(s(!0),h(M,null,j(e.actions,(u,b)=>(s(),q(Be,{key:b,text:u.label},{default:S(()=>[K(Y,P({size:"sm",color:"neutral",variant:"ghost"},{ref_for:!0},f(L)(u,["onClick"]),{label:void 0,onClick:l=>typeof u.onClick=="function"?u.onClick(l,t):void 0}),null,16,["onClick"])]),_:2},1032,["text"]))),128))])],2)):w("",!0)],2)]),_:3},8,["as","data-role","class"]))}},Ie={slots:{root:"w-full flex flex-col gap-1 flex-1 px-2.5 [&>article]:last-of-type:min-h-(--last-message-height)",indicator:"h-6 flex items-center gap-1 py-3 *:size-2 *:rounded-full *:bg-elevated [&>*:nth-child(1)]:animate-[bounce_1s_infinite] [&>*:nth-child(2)]:animate-[bounce_1s_0.15s_infinite] [&>*:nth-child(3)]:animate-[bounce_1s_0.3s_infinite]",viewport:"absolute inset-x-0 top-[86%] data-[state=open]:animate-[fade-in_200ms_ease-out] data-[state=closed]:animate-[fade-out_200ms_ease-in]",autoScroll:"rounded-full absolute right-1/2 translate-x-1/2 bottom-0"},variants:{compact:{true:"",false:""}}},Ve=["data-status"],Ae=["data-state"],Re={__name:"UChatMessages",props:{messages:{type:Array,required:!1},status:{type:String,required:!1},shouldAutoScroll:{type:Boolean,required:!1,default:!1},shouldScrollToBottom:{type:Boolean,required:!1,default:!0},autoScroll:{type:[Boolean,Object],required:!1,default:!0},autoScrollIcon:{type:null,required:!1},user:{type:Object,required:!1},assistant:{type:Object,required:!1},compact:{type:Boolean,required:!1},spacingOffset:{type:Number,required:!1,default:0},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(e){const t=e,a=R(),c=()=>L(a,["default","indicator","viewport"]),o=H(),p=G(()=>ee(t.user,{side:"right",variant:"soft"})),m=G(()=>ee(t.assistant,{side:"left",variant:"naked"})),u=T(()=>k({extend:k(Ie),...o.ui?.chatMessages||{}})({compact:t.compact})),b=$(null),l=$(null),v=$(new Map),x=$(!1),I=$(0),B=$(!1),V=$(0),g=$(!1);function E(n,i){const r=i?.$el;r&&v.value.set(n,r)}function U(n){const i=v.value.get(n);i&&i.scrollIntoView({behavior:"smooth",block:"start"})}function z(n=!0){l.value&&(n?l.value.scrollTo({top:l.value.scrollHeight,behavior:"smooth"}):l.value.scrollTop=l.value.scrollHeight)}ge([()=>t.messages,()=>t.status],([n,i])=>{if(i==="streaming"){if(!t.shouldAutoScroll){O();return}D(()=>{!l.value||g.value||l.value.scrollHeight-l.value.scrollTop-l.value.clientHeight<150&&z(!1)})}},{deep:!0,throttle:50,leading:!0}),ye(()=>t.status,n=>{if(n!=="submitted")return;const i=t.messages?.[t.messages.length-1];!i||i.role!=="user"||(g.value=!1,D(()=>{B.value=!0,J(),D(()=>{U(i.id)})}))});function O(){if(!l.value)return;const n=l.value.scrollTop+l.value.clientHeight,i=l.value.scrollHeight,r=100;x.value=i-n>=r,l.value.scrollTop<V.value?g.value=!0:i-n<r&&(g.value=!1),V.value=l.value.scrollTop}function Z(){g.value=!1,z()}function fe(n){if(!n)return document.documentElement;const i=/auto|scroll/;let r=n;for(;r&&r!==document.body&&r!==document.documentElement;){const C=window.getComputedStyle(r);if(i.test(C.overflowY))return r;r=r.parentElement}return document.documentElement}function J(){if(!b.value||!l.value||!t.messages?.length||!B.value)return;const{height:n}=Se(l.value),i=t.messages.findLast(pe=>pe.role==="user");if(!i)return;const r=v.value.get(i.id);if(!r)return;let C=t.spacingOffset||0;const N=window.getComputedStyle(b.value),F=window.getComputedStyle(l.value);C+=Number.parseFloat(N.rowGap)||Number.parseFloat(N.gap)||0,C+=Number.parseFloat(F.paddingTop)||0,C+=Number.parseFloat(F.paddingBottom)||0,I.value=Math.max(n.value-r.offsetHeight-C,0)}return be(()=>{l.value=fe(b.value),l.value&&(V.value=l.value.scrollTop,setTimeout(()=>{t.shouldScrollToBottom?z(!1):O()},100),te(l,"scroll",O),te(window,"resize",()=>D(J)))}),(n,i)=>(s(),h("div",{ref_key:"el",ref:b,"data-status":e.status,"data-slot":"root",class:d(u.value.root({class:[t.ui?.root,t.class]})),style:qe({"--last-message-height":`${I.value}px`})},[y(n.$slots,"default",{},()=>[(s(!0),h(M,null,j(e.messages,r=>(s(),q(oe,P({key:r.id},{ref_for:!0},{...r,...r.role==="user"?p.value:m.value},{ref_for:!0,ref:C=>E(r.id,C),compact:e.compact}),W({_:2},[j(c(),(C,N)=>({name:N,fn:S(F=>[y(n.$slots,N,P({ref_for:!0},F,{message:r}))])}))]),1040,["compact"]))),128))]),e.status==="submitted"?(s(),q(oe,P({key:0,id:"indicator",role:"assistant"},{...m.value,actions:void 0,parts:[]},{compact:e.compact}),{content:S(()=>[y(n.$slots,"indicator",{ui:u.value},()=>[A("div",{"data-slot":"indicator",class:d(u.value.indicator({class:t.ui?.indicator}))},[...i[0]||(i[0]=[A("span",null,null,-1),A("span",null,null,-1),A("span",null,null,-1)])],2)])]),_:3},16,["compact"])):w("",!0),K(f(he),{present:x.value},{default:S(()=>[A("div",{"data-state":x.value?"open":"closed","data-slot":"viewport",class:d(u.value.viewport({class:t.ui?.viewport}))},[y(n.$slots,"viewport",{ui:u.value,onClick:Z},()=>[e.autoScroll?(s(),q(Y,P({key:0,icon:e.autoScrollIcon||f(o).ui.icons.arrowDown,color:"neutral",variant:"outline"},typeof e.autoScroll=="object"?e.autoScroll:{},{"data-slot":"autoScroll",class:u.value.autoScroll({class:t.ui?.autoScroll}),onClick:Z}),null,16,["icon","class"])):w("",!0)])],10,Ae)]),_:3},8,["present"])],14,Ve))}},ze={slots:{base:""}},He=Object.assign({inheritAttrs:!1},{__name:"UChatPromptSubmit",props:{status:{type:String,required:!1,default:"ready"},icon:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},streamingIcon:{type:null,required:!1},streamingColor:{type:null,required:!1,default:"neutral"},streamingVariant:{type:null,required:!1,default:"subtle"},submittedIcon:{type:null,required:!1},submittedColor:{type:null,required:!1,default:"neutral"},submittedVariant:{type:null,required:!1,default:"subtle"},errorIcon:{type:null,required:!1},errorColor:{type:null,required:!1,default:"error"},errorVariant:{type:null,required:!1,default:"soft"},ui:{type:void 0,required:!1},class:{type:null,required:!1},label:{type:String,required:!1},activeColor:{type:null,required:!1},activeVariant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},block:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},onClick:{type:[Function,Array],required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},disabled:{type:Boolean,required:!1},active:{type:Boolean,required:!1},exact:{type:Boolean,required:!1},exactQuery:{type:[Boolean,String],required:!1},exactHash:{type:Boolean,required:!1},inactiveClass:{type:String,required:!1},to:{type:null,required:!1},href:{type:null,required:!1},external:{type:Boolean,required:!1},target:{type:[String,Object,null],required:!1},rel:{type:[String,Object,null],required:!1},noRel:{type:Boolean,required:!1},prefetchedClass:{type:String,required:!1},prefetch:{type:Boolean,required:!1},prefetchOn:{type:[String,Object],required:!1},noPrefetch:{type:Boolean,required:!1},trailingSlash:{type:String,required:!1},activeClass:{type:String,required:!1},exactActiveClass:{type:String,required:!1},ariaCurrentValue:{type:String,required:!1},viewTransition:{type:Boolean,required:!1},replace:{type:Boolean,required:!1}},emits:["stop","reload"],setup(e,{emit:t}){const a=e,c=t,o=R(),{t:p}=ne(),m=H(),u=ie(xe(a,"icon","color","variant","status","streamingIcon","streamingColor","streamingVariant","submittedIcon","submittedColor","submittedVariant","errorIcon","errorColor","errorVariant","class","ui")),b=T(()=>({ready:{icon:a.icon||m.ui.icons.arrowUp,color:a.color,variant:a.variant,type:"submit"},submitted:{icon:a.submittedIcon||m.ui.icons.stop,color:a.submittedColor,variant:a.submittedVariant,onClick(v){c("stop",v)}},streaming:{icon:a.streamingIcon||m.ui.icons.stop,color:a.streamingColor,variant:a.streamingVariant,onClick(v){c("stop",v)}},error:{icon:a.errorIcon||m.ui.icons.reload,color:a.errorColor,variant:a.errorVariant,onClick(v){c("reload",v)}}})[a.status]),l=T(()=>k({extend:k(ze),...m.ui?.chatPromptSubmit||{}})());return(v,x)=>(s(),q(Y,P({...f(u),...b.value,"aria-label":f(p)("chatPromptSubmit.label"),...v.$attrs},{class:l.value.base({class:[a.ui?.base,a.class]}),ui:f(de)(l.value,a.ui)}),W({_:2},[j(o,(I,B)=>({name:B,fn:S(V=>[y(v.$slots,B,ue(ce(V)))])}))]),1040,["class","ui"]))}}),Me={slots:{root:"relative flex flex-col items-stretch gap-2 px-2.5 py-2 w-full rounded-lg backdrop-blur",header:"flex items-center gap-1.5",body:"items-start",footer:"flex items-center justify-between gap-1.5",base:"text-base/5"},variants:{variant:{outline:{root:"bg-default/75 ring ring-default"},soft:{root:"bg-elevated/50"},subtle:{root:"bg-elevated/50 ring ring-default"},naked:{root:""}}},defaultVariants:{variant:"outline"}},Ee=Object.assign({inheritAttrs:!1},{__name:"UChatPrompt",props:ae({as:{type:null,required:!1,default:"form"},placeholder:{type:String,required:!1},variant:{type:null,required:!1},error:{type:Error,required:!1},class:{type:null,required:!1},ui:{type:void 0,required:!1},rows:{type:Number,required:!1,default:1},autofocus:{type:Boolean,required:!1,default:!0},autofocusDelay:{type:Number,required:!1},autoresize:{type:Boolean,required:!1,default:!0},autoresizeDelay:{type:Number,required:!1},maxrows:{type:Number,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},disabled:{type:Boolean,required:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:ae(["submit","close"],["update:modelValue"]),setup(e,{expose:t,emit:a}){const c=e,o=a,p=R(),m=we(e,"modelValue",{type:String,default:""}),{t:u}=ne(),b=H(),l=ie(ke(c,"rows","autofocus","autofocusDelay","autoresize","autoresizeDelay","maxrows","icon","avatar","loading","loadingIcon")),v=()=>L(p,["header","footer"]),x=T(()=>k({extend:k(Me),...b.ui?.chatPrompt||{}})({variant:c.variant})),I=Ce("textareaRef");function B(g){m.value.trim()!==""&&o("submit",g)}function V(g){I.value?.textareaRef?.blur(),o("close",g)}return t({textareaRef:G(()=>I.value?.textareaRef)}),(g,E)=>(s(),q(f(Q),{as:e.as,"data-slot":"root",class:d(x.value.root({class:[c.ui?.root,c.class]})),onSubmit:se(B,["prevent"])},{default:S(()=>[p.header?(s(),h("div",{key:0,"data-slot":"header",class:d(x.value.header({class:c.ui?.header}))},[y(g.$slots,"header")],2)):w("",!0),K($e,P({ref_key:"textareaRef",ref:I,modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=U=>m.value=U),placeholder:e.placeholder||f(u)("chatPrompt.placeholder"),disabled:!!e.error||e.disabled,variant:"none"},{...f(l),...g.$attrs},{ui:f(de)(f(L)(x.value,["root","body","header","footer"]),c.ui),"data-slot":"body",class:x.value.body({class:c.ui?.body}),onKeydown:[le(se(B,["exact","prevent"]),["enter"]),le(V,["esc"])]}),W({_:2},[j(v(),(U,z)=>({name:z,fn:S(O=>[y(g.$slots,z,ue(ce(O)))])}))]),1040,["modelValue","placeholder","disabled","ui","class","onKeydown"]),p.footer?(s(),h("div",{key:1,"data-slot":"footer",class:d(x.value.footer({class:c.ui?.footer}))},[y(g.$slots,"footer")],2)):w("",!0)]),_:3},8,["as","class"]))}}),Te={slots:{root:"relative flex-1 flex flex-col min-h-0 min-w-0",prompt:"px-0 rounded-t-none border-t border-default",close:"",content:"overflow-y-auto flex-1 flex flex-col py-3"}},Ue={__name:"UChatPalette",props:{as:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(e){const t=e,a=R(),c=H(),o=T(()=>k({extend:k(Te),...c.ui?.chatPalette||{}})());return(p,m)=>(s(),q(f(Q),{as:e.as,"data-slot":"root",class:d(o.value.root({class:[t.ui?.root,t.class]}))},{default:S(()=>[A("div",{"data-slot":"content",class:d(o.value.content({class:t.ui?.content}))},[K(f(re),{compact:""},{default:S(()=>[y(p.$slots,"default")]),_:3})],2),a.prompt?(s(),q(f(re),{key:0,"data-slot":"prompt",class:d(o.value.prompt({class:t.ui?.prompt}))},{default:S(()=>[y(p.$slots,"prompt")]),_:3},8,["class"])):w("",!0)]),_:3},8,["as","class"]))}};export{Ue as _,Re as a,Ee as b,He as c};
