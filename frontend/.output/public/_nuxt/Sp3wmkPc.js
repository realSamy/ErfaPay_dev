import{_ as T}from"./OXrPZgjz.js";import{z as D,A as $,e as l,d as E,I as R,aA as _,a5 as S,_ as b,k as q,g as G,j as g,v as m,x as s,i as f,a9 as H,D as J}from"./B9jAKPWx.js";import{_ as M}from"./CboeWgWE.js";import{_ as Q}from"./f4Ke4YGl.js";import{u as W}from"./B8pTcEJU.js";import{s as n,f as X}from"./DcDGsNhf.js";const Y={class:"w-full space-y-4 pb-4"},Z={class:"flex justify-between px-4 py-3.5 border-b border-accented"},ee={class:"flex justify-center border-t border-default pt-4"},ae=D({__name:"orders",props:{user:{}},async setup(w){let h,y;const{t}=$(),j=w,U=b,v=l(10),V=l([]),K=E(()=>[{value:"done",label:t("common.states.orders.done")},{value:"rejected",label:t("common.states.orders.rejected")},{value:"pending",label:t("common.states.orders.pending")},{value:"processing",label:t("common.states.orders.processing")}]),c=l(""),i=l([]),k=l([]),{d:A,n:u,locale:F}=$(),{orders:I,loading:N,totalItems:x,pageCount:P,currentPage:d,goToPage:B,refresh:C}=W(V,c,i,v,j.user);[h,y]=R(()=>C()),await h,y();const z=a=>{B(a)},L=l([{accessorKey:"id",enableSorting:!1,header:n("#"),cell:({row:a})=>{const e=a.getValue("id"),o=a.getValue("user").id,p=u(Number(e));return _(b,{label:p,icon:"material-symbols:open-in-new",variant:"link",to:S()({name:"admin-users-id-orders-order",params:{order:e,id:o}})})}},{accessorKey:"service",header:t("common.tables.service"),cell:({row:a})=>a.getValue("service")[`title_${F.value}`]},{id:"user",accessorKey:"user",header:n(t("common.tables.user")),enableSorting:!1,cell:({row:a})=>{const e=a.original.user,o=e.full_name||e.email;return _(b,{label:o,variant:"link",to:S()({name:"admin-users-id",params:{id:e.id}})})}},{accessorKey:"user_amount_irt",header:n(t("services.labels.order_price")),enableSorting:!1,cell:({row:a})=>{const e=Number.parseFloat(a.getValue("user_amount_irt"));return`${u(e)} ${t("common.currencies.text.toman")}`}},{accessorKey:"total_irt",header:n(t("services.labels.order_total_price")),enableSorting:!1,cell:({row:a})=>{const e=Number.parseFloat(a.getValue("total_irt"));return`${u(e)} ${t("common.currencies.text.toman")}`}},{accessorKey:"created_at",header:n(t("common.tables.date")),enableSorting:!1,cell:({row:a})=>A(a.getValue("created_at"),{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",hour12:!1})},{accessorKey:"status",header:X(t("common.tables.state"),K,V),enableSorting:!1,cell:({row:a})=>{const{color:e,label:o}={done:{color:"success",label:"انجام شده"},rejected:{color:"error",label:"رد شده"},pending:{color:"neutral",label:"در انتظار"},processing:{color:"info",label:"در حال انجام"}}[a.getValue("status")];return _(T,{class:"capitalize w-full justify-center",variant:"subtle",color:e},()=>o)}}]);return(a,e)=>{const o=H,p=M,O=Q;return G(),q("div",Y,[g("div",Z,[m(o,{modelValue:s(c),"onUpdate:modelValue":e[0]||(e[0]=r=>f(c)?c.value=r:null),placeholder:s(t)("common.tables.search"),class:"max-w-sm",icon:"material-symbols:search",type:"search"},null,8,["modelValue","placeholder"]),m(s(U),{label:s(t)("common.tables.download"),icon:"material-symbols:download"},null,8,["label"])]),m(p,{sorting:s(i),"onUpdate:sorting":e[1]||(e[1]=r=>f(i)?i.value=r:null),"column-filters":s(k),columns:s(L),data:s(I),filtering:!1,loading:s(N),sticky:""},null,8,["sorting","column-filters","columns","data","loading"]),g("div",ee,[m(O,{modelValue:s(d),"onUpdate:modelValue":e[2]||(e[2]=r=>f(d)?d.value=r:null),"items-per-page":s(v),"page-count":s(P),total:s(x),"show-edges":"","onUpdate:page":z},null,8,["modelValue","items-per-page","page-count","total"])]),g("pre",null,J(s(x)),1)])}}}),ce=Object.assign(ae,{__name:"TableAdminOrders"});export{ce as _};
